import React from 'react';
import { useStaticQuery, graphql, Link } from 'gatsby';
import BaseComponent from '../base/base-component';
import CtaSection from '../cta/cta';
import { PopupModal } from 'react-calendly';


class Footer extends BaseComponent {
  constructor(properties) {
    super(properties);

    this.pathname = '';
    this.state = {
      isOpen: false,
    };
  }
  render() {
    const { footerNav } = this.props;
    return (
      <>
      <CtaSection />
      <footer className="o-section c-section--footer">
        <div className="o-section__wrapper">
          <div className="c-footer">
            <div className="c-footer__main">
              <div className="c-footer__col">
                <div className="c-footer__text">
                  <span>Office:</span> 13636 Ventura Blvd, Los Angeles, CA
                </div>
                <div className="c-footer__logos">
                  <a href="https://clutch.co/profile/refact" className="c-link" target='_blank' aria-label="Refact Client Reviews" rel="noreferrer">
                    <svg className="c-footer__logos--clu" width="90" height="51" viewBox="0 0 90 51" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M27.515 24.8279H23.418V50.4299H27.515V24.8279ZM41.856 42.2629C41.856 46.1809 38.56 46.4929 37.58 46.4929C35.13 46.4929 34.685 44.2019 34.685 42.8189V33.0199H30.588V42.7979C30.588 45.2259 31.35 47.2279 32.686 48.5639C33.866 49.7449 35.634 50.3899 37.549 50.3899C38.908 50.3899 40.831 49.9679 41.856 49.0319V50.4299H45.953V33.0199H41.856V42.2629ZM54.148 26.8749H50.05V33.0199H46.977V37.1169H50.051V50.4299H54.148V37.1169H57.221V33.0199H54.148V26.8749ZM70.125 45.2249C69.232 46.0269 68.055 46.4719 66.762 46.4719C63.912 46.4719 61.819 44.3789 61.819 41.5069C61.819 38.6339 63.845 36.6299 66.762 36.6299C68.032 36.6299 69.232 37.0529 70.147 37.8549L70.769 38.3889L73.532 35.6289L72.84 35.0039C71.214 33.5369 69.056 32.7139 66.76 32.7139C61.639 32.7139 57.92 36.4079 57.92 41.4849C57.92 46.5399 61.728 50.3679 66.76 50.3679C69.1 50.3679 71.28 49.5439 72.885 48.0529L73.553 47.4289L70.747 44.6699L70.125 45.2249ZM88.156 34.5379C86.976 33.3579 85.593 32.7139 83.678 32.7139C82.32 32.7139 80.781 33.1359 79.757 34.0709V24.8279H75.659V50.4299H79.757V40.8399C79.757 36.9219 82.541 36.6099 83.521 36.6099C85.971 36.6099 85.903 38.9029 85.903 40.2839V50.4299H90V40.3049C90 37.8779 89.493 35.8749 88.156 34.5379Z" fill="white"/>
                      <path d="M66.6258 38.5898C67.4113 38.5898 68.1646 38.9019 68.7199 39.4572C69.2753 40.0126 69.5873 40.7659 69.5873 41.5513C69.5873 42.3368 69.2753 43.0901 68.7199 43.6454C68.1646 44.2008 67.4113 44.5128 66.6258 44.5128C65.8498 44.4986 65.1104 44.1803 64.5667 43.6265C64.0229 43.0726 63.7183 42.3275 63.7183 41.5513C63.7183 40.7752 64.0229 40.0301 64.5667 39.4762C65.1104 38.9224 65.8498 38.6041 66.6258 38.5898Z" fill="#FF3D2E"/>
                      <path d="M17.681 43.9999C16.123 45.6029 14.007 46.4709 11.78 46.4709C7.215 46.4709 3.897 42.8869 3.897 37.9669C3.897 33.0239 7.215 29.4399 11.78 29.4399C13.985 29.4399 16.078 30.3069 17.66 31.8879L18.282 32.5119L21.022 29.7739L20.42 29.1499C18.15 26.8119 15.076 25.5439 11.78 25.5439C5.055 25.5439 0 30.8869 0 37.9879C0 45.0679 5.078 50.3889 11.78 50.3889C15.099 50.3889 18.172 49.0989 20.443 46.7609L21.044 46.1369L18.328 43.3549L17.681 43.9999Z" fill="white"/>
                      <path d="M5.68123 10.2159V12.9999H4.78223V6.32988H6.66823C7.09023 6.32988 7.45523 6.37288 7.76223 6.45988C8.06923 6.54288 8.32223 6.66588 8.52123 6.82688C8.72223 6.98888 8.87123 7.18388 8.96723 7.41388C9.06423 7.63988 9.11223 7.89388 9.11223 8.17688C9.11223 8.41288 9.07523 8.63288 9.00023 8.83788C8.92623 9.04288 8.81723 9.22788 8.67423 9.39188C8.53423 9.55388 8.36223 9.69188 8.15823 9.80688C7.94222 9.92691 7.70973 10.0145 7.46823 10.0669C7.58023 10.1319 7.68023 10.2269 7.76623 10.3509L9.71223 12.9999H8.91223C8.74723 12.9999 8.62623 12.9359 8.54923 12.8099L6.81723 10.4259C6.7739 10.3595 6.71481 10.3049 6.64523 10.2669C6.55728 10.2279 6.46122 10.2107 6.36523 10.2169H5.68123V10.2159ZM5.68123 9.55988H6.62623C6.89023 9.55988 7.12123 9.52888 7.32023 9.46688C7.52123 9.40188 7.68923 9.31188 7.82223 9.19688C7.9562 9.08278 8.06166 8.93896 8.13023 8.77688C8.19995 8.60725 8.23465 8.42527 8.23223 8.24188C8.23223 7.84488 8.10023 7.54588 7.83623 7.34388C7.57623 7.14188 7.18623 7.04088 6.66823 7.04088H5.68023V9.55988H5.68123ZM14.7912 6.32988V7.06488H11.5902V9.27988H14.1832V9.98688H11.5902V12.2639H14.7932V12.9999H10.6832V6.32988H14.7932H14.7912ZM15.3182 6.32988H16.0402C16.1102 6.32649 16.1792 6.34772 16.2352 6.38988C16.2852 6.42988 16.3222 6.48088 16.3472 6.54288L18.2322 11.2499C18.2762 11.3549 18.3152 11.4699 18.3492 11.5939C18.3862 11.7179 18.4222 11.8469 18.4562 11.9799C18.4842 11.8469 18.5132 11.7179 18.5442 11.5939C18.5782 11.4699 18.6172 11.3549 18.6612 11.2499L20.5372 6.54288C20.5617 6.48644 20.5999 6.43696 20.6482 6.39888C20.7024 6.35168 20.7724 6.32667 20.8442 6.32888H21.5702L18.8512 12.9999H18.0372L15.3182 6.32988ZM23.4902 12.9999H22.5872V6.32988H23.4902V12.9999ZM29.3852 6.32988V7.06488H26.1822V9.27988H28.7752V9.98688H26.1822V12.2639H29.3852V12.9999H25.2742V6.32988H29.3842H29.3852ZM29.9392 6.32988H30.6892C30.7692 6.32988 30.8362 6.34988 30.8892 6.38988C30.9412 6.42988 30.9772 6.48088 30.9962 6.54288L32.3742 11.1799C32.4248 11.3689 32.4668 11.5601 32.5002 11.7529C32.5212 11.6469 32.5432 11.5459 32.5652 11.4499C32.5862 11.3499 32.6112 11.2599 32.6392 11.1799L34.2082 6.54288C34.23 6.48597 34.267 6.43615 34.3152 6.39888C34.3713 6.35224 34.4423 6.32738 34.5152 6.32888H34.7752C34.8456 6.32525 34.915 6.34649 34.9712 6.38888C35.0242 6.42988 35.0612 6.48088 35.0832 6.54288L36.6432 11.1799C36.6982 11.3409 36.7482 11.5259 36.7912 11.7339L36.8432 11.4409C36.8582 11.3469 36.8782 11.2609 36.9032 11.1799L38.2862 6.54288C38.3039 6.4838 38.3395 6.43171 38.3882 6.39388C38.4455 6.35002 38.5161 6.32708 38.5882 6.32888H39.2912L37.2112 12.9999H36.4012L34.7112 7.91188C34.6731 7.80225 34.6417 7.69037 34.6172 7.57688C34.5892 7.68888 34.5598 7.80055 34.5292 7.91188L32.8292 12.9999H32.0192L29.9392 6.32988ZM44.2772 6.32988V7.06488H41.0752V9.27988H43.6682V9.98688H41.0752V12.2639H44.2772V12.9999H40.1672V6.32988H44.2772ZM51.3582 9.66688C51.3582 10.1669 51.2792 10.6209 51.1212 11.0309C50.9632 11.4409 50.7392 11.7909 50.4512 12.0829C50.1561 12.379 49.8026 12.6106 49.4132 12.7629C49.0092 12.9209 48.5632 12.9999 48.0722 12.9999H45.5772V6.32988H48.0722C48.5622 6.32988 49.0092 6.40988 49.4122 6.57088C49.8162 6.72888 50.1622 6.95588 50.4512 7.25088C50.7392 7.54288 50.9632 7.89288 51.1212 8.30288C51.2792 8.71288 51.3582 9.16688 51.3582 9.66688ZM50.4322 9.66688C50.4322 9.25688 50.3762 8.89088 50.2642 8.56788C50.1643 8.26516 50.0029 7.98633 49.7902 7.74888C49.5836 7.52429 49.3289 7.34926 49.0452 7.23688C48.7354 7.11554 48.4049 7.05544 48.0722 7.05988H46.4842V12.2699H48.0722C48.4292 12.2699 48.7532 12.2099 49.0452 12.0919C49.3362 11.9739 49.5852 11.8049 49.7902 11.5849C49.9952 11.3609 50.1532 11.0879 50.2642 10.7649C50.3762 10.4429 50.4322 10.0769 50.4322 9.66688ZM60.5832 9.66688C60.5832 10.1669 60.5032 10.6259 60.3462 11.0449C60.2022 11.4453 59.9751 11.8106 59.6799 12.1171C59.3846 12.4235 59.028 12.664 58.6332 12.8229C58.2066 12.9918 57.7511 13.0757 57.2922 13.0699C56.8337 13.0756 56.3785 12.9917 55.9522 12.8229C55.5584 12.663 55.2027 12.4221 54.9081 12.1158C54.6135 11.8095 54.3866 11.4446 54.2422 11.0449C54.0802 10.6038 53.9999 10.1368 54.0052 9.66688C54.0052 9.16688 54.0852 8.70888 54.2432 8.29388C54.4012 7.87388 54.6242 7.51388 54.9132 7.21388C55.2022 6.90888 55.5482 6.67388 55.9512 6.50588C56.3552 6.33788 56.8012 6.25488 57.2912 6.25488C57.7822 6.25488 58.2292 6.33788 58.6332 6.50588C59.0392 6.67388 59.3872 6.90888 59.6752 7.21388C59.9642 7.51388 60.1872 7.87388 60.3452 8.29388C60.5042 8.70888 60.5832 9.16688 60.5832 9.66688ZM59.6572 9.66688C59.6572 9.25688 59.6012 8.88888 59.4892 8.56388C59.3898 8.25924 59.228 7.97863 59.0142 7.73988C58.8082 7.51221 58.5536 7.3338 58.2692 7.21788C57.9587 7.09351 57.6267 7.03199 57.2922 7.03688C56.9352 7.03688 56.6112 7.09688 56.3192 7.21788C56.0338 7.33446 55.7777 7.51272 55.5692 7.73988C55.3558 7.97872 55.1944 8.25933 55.0952 8.56388C54.9787 8.91975 54.9219 9.29246 54.9272 9.66688C54.9272 10.0769 54.9832 10.4439 55.0952 10.7699C55.2062 11.0929 55.3652 11.3679 55.5692 11.5939C55.7772 11.8179 56.0272 11.9899 56.3192 12.1109C56.6112 12.2289 56.9352 12.2879 57.2922 12.2879C57.6522 12.2879 57.9782 12.2279 58.2692 12.1109C58.5612 11.9899 58.8092 11.8179 59.0142 11.5939C59.2192 11.3679 59.3772 11.0929 59.4892 10.7699C59.6012 10.4439 59.6572 10.0769 59.6572 9.66688ZM62.2812 6.32888C62.3612 6.32888 62.4212 6.33988 62.4582 6.36188C62.4982 6.37988 62.5432 6.42088 62.5932 6.48188L66.4572 11.5099C66.4477 11.4328 66.4411 11.3554 66.4372 11.2779C66.4344 11.2032 66.4331 11.1286 66.4332 11.0539V6.32988H67.2252V12.9999H66.7682C66.7058 13.0017 66.6439 12.9891 66.5872 12.9629C66.5325 12.9308 66.4848 12.888 66.4472 12.8369L62.5882 7.81388C62.5998 7.95794 62.6061 8.10237 62.6072 8.24688V12.9999H61.8152V6.32988H62.2812V6.32888Z" fill="white"/>
                    </svg>
                  </a>
                </div>
              </div>
              <div className="c-footer__col">
                <div className="c-footer__menu">
                  <ul className='c-footer__links' id='footer_menu'>
                  {footerNav.menuItems.nodes.map((item, index) => {
                    const { label, url, cssClasses } = item;
                    const isActive = this.pathname === url;
                    const className = [
                      'menu-item',
                      isActive ? 'current-menu-item' : '',
                      cssClasses,
                    ].join(' ');
                    return (
                      <li key={index} className={className}>
                        {className.includes('js-calendly-popup') ? (
                          <>
                            <button className='c-btn-link' style={{ display: "block", margin: "0 auto" }}
                            onClick={() => this.setState({ isOpen: true })}>
                              {label}
                            </button>
                            <PopupModal
                            url="https://calendly.com/saeedreza/30min"
                    
                            rootElement={document.getElementById("___gatsby")}
                              utm={this.props.utm}
                              prefill={this.props.prefill}
                              onModalClose={() => this.setState({ isOpen: false })}
                              open={this.state.isOpen}
                            />
                          </>
                        ) : (
                          <Link to={url} aria-label={label}>
                            {label}
                          </Link>
                        )}
                      </li>
                      
                    );
                  })}
                </ul>
                </div>
              </div>
            </div>

            <div className="c-footer__copyright">
              <div className="c-copyright__col">
                <div className="c-logo">
                  <svg width="70" viewBox="0 0 104 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g fill="#fff"><path d="M12.023 13.774c2.24-1.234 3.357-3.385 3.351-6.454a6.79 6.79 0 0 0-1.911-5.143A7.577 7.577 0 0 0 8.028.351H.571v23.143h4.672v-8.477h2.323l3.488 8.46h5.023v-.223l-4.054-9.48ZM10 10.191a2.46 2.46 0 0 1-2.1.926H5.243V4.26h2.743c1.811 0 2.717 1.16 2.717 3.48A4.046 4.046 0 0 1 10 10.191ZM32.44 4.217v-3.9H19.18V23.46h8.34l1.114-3.883h-4.782v-6.103h6.531l1.08-3.77h-7.611V4.216h8.588ZM49.36 4.217v-3.9H39.074L36.503 9.43v14.048h4.68V14.05h7.269v-3.883h-7.27V4.217h8.178ZM60.683.317h-4.286L49.163 23.46h4.946l1.243-4.74h6.377l1.234 4.74h4.997L60.683.317Zm-4.286 14.52 2.169-8.254 2.16 8.254h-4.329ZM79.677 19.012a3.078 3.078 0 0 1-2.571.857 2.837 2.837 0 0 1-2.649-1.286c-.514-.857-.771-2.443-.771-4.74V9.472a9.283 9.283 0 0 1 .857-4.286A2.845 2.845 0 0 1 77.2 3.875a2.983 2.983 0 0 1 2.571.925 6.257 6.257 0 0 1 .755 3.429h4.697a9.6 9.6 0 0 0-2.237-6.077C81.674.737 79.763.035 77.234.035a7.414 7.414 0 0 0-6 2.571c-1.44 1.714-2.16 4.166-2.16 7.354v3.892c0 3.197.695 5.648 2.092 7.371a7.278 7.278 0 0 0 6 2.572 7.835 7.835 0 0 0 5.785-2.04c1.372-1.355 2.109-3.352 2.229-6H80.5a5.915 5.915 0 0 1-.823 3.257ZM87.563.317v3.9h5.631v19.26h4.689V4.217h5.726v-3.9H87.563Z"/></g></svg>
                </div>
                <span>
                  Copyright &copy; {new Date().getFullYear()} Refact, LLC.
                </span>
              </div>
              <div className="c-copyright__col">
                <Link to="/privacy-policy" className="c-link">
                  Privacy Policy
                </Link>
              </div>
            </div>
          </div>
        </div>
      </footer>
      </>
    );
  }
}

const FooterWrapper = () => {
  const data = useStaticQuery(graphql`
    query FooterQuery {
      footerNav: wpMenuItem(menu: {node: {locations: {eq: MENU_FOOTER}}}) {
        menu {
          node {
            slug
            nodeType
            name
            menuItems {
              nodes {
                label
                cssClasses
                url
              }
            }
          }
        }
      }
    }
  `);

  const footerNav = data.footerNav.menu.node;

  return <Footer footerNav={footerNav} />;
};

export default FooterWrapper;